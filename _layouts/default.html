<!doctype html>
<html lang="en">
  <head>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <link rel="me" href="https://micro.blog/muan">
    <link rel="alternate" type="application/rss+xml" href="/notes.xml">
    <link rel="icon" href="/assets/fav.svg" type="image/svg+xml" sizes="24x24">
    <!--link rel="icon" href="/assets/fav.png" type="image/png" sizes="96x96"-->
    <link href="https://fonts.googleapis.com/css2?family=Readex+Pro&display=swap" rel="stylesheet">
    <link href="/assets/new.css" rel="stylesheet" type="text/css">
    {% if page.collection == "posts" %}
      <link href="/assets/syntax.css" rel="stylesheet" type="text/css">
    {% endif %}
    {% if page.title %}
      <title>{{ page.title }} - {{ site.title }}</title>
      <meta content="{{ page.title }} - {{ site.title }}" property="og:title">
      <meta content="{{ page.title }} - {{ site.title }}" name="twitter:title">
    {% else %}
      <title>{{ site.title }}</title>
      <meta content="{{ site.title }}" property="og:title">
      <meta content="{{ site.title }}" name="twitter:title">
    {% endif %}
    {% if page.collection == "posts" or page.collection == "notes" or page.collection == "stories" %}
      <meta content="{{ site.url }}{{ page.url }}" property="og:url">
      <meta content="{{ page.content | strip_html | strip_newlines | truncate: 120 }}" name="description">
      {% if page.collection == "posts" %}
      <meta content="article" property="og:type">
      <meta content="@ewen" property="twitter:site">
      <meta name="twitter:card" content="summary_large_image">
      {% endif %}
      {% if page.image %}
        <meta content="https://muan.co/images/{{ page.image }}" property="og:image">
        <meta content="https://muan.co/images/{{ page.image }}" property="twitter:image">
      {% elsif page.image_text %}
        <meta content="https://muan-text-image.herokuapp.com/title?v=2&text={{ page.image_text | strip | url_encode }}" property="og:image">
        <meta content="https://muan-text-image.herokuapp.com/title?v=2&text={{ page.image_text | strip | url_encode }}" property="twitter:image">
      {% else %}
        <meta content="summary" name="twitter:card">
        <meta content="https://muan.co/assets/logo.png" name="twitter:image">
        <meta content="https://muan.co/assets/logo.png" property="og:image">
      {% endif %}
    {% else %}
      <meta content="summary" name="twitter:card">
      <meta content="https://muan.co/assets/logo.png" property="twitter:image">
      <meta content="https://muan.co/assets/logo.png" property="og:image">
      <meta content="{{ site.description }}" name="description">
      <meta content="website" property="og:type">
    {% endif %}
  </head>
  
  <body class="{% if page.root != true %}post-body{% endif %} col-{{ page.collection }}" data-page-type="{{ page.type }}">
    <header>
      <div class="logo-container">
        {% if page.root != true %}
          <a href="/{% if page.collection == "notes" %}notes{% endif %}" aria-label="Home" class="back-link">&leftarrow;</a>
        {% endif %}
        <svg class="logo" viewBox="0 0 196 169" fill="none" xmlns="http://www.w3.org/2000/svg">
          <title>E!</title>
          <g
       style="fill:none"
       id="g235"
       transform="matrix(1.0702267,-0.31045191,0.31045191,1.0702267,-34.831693,20.520506)">
      <path
         style="fill:none;stroke:#000000;stroke-width:3px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         d="m 99.048128,17.818182 c 0,0 -64.721925,4.716577 -68.652406,60.529412 -3.930481,55.812836 41.139037,70.224596 41.139037,70.224596 53.454541,5.24064 65.770051,2.35829 65.770051,2.35829 0,0 29.87166,-3.40642 30.39572,-50.57219 0.52407,-47.165777 -11.52941,-63.673798 -11.52941,-63.673798 0,0 -14.41176,-19.128342 -57.122992,-18.86631 z"
         id="path68" />
      <path
         style="fill:none;stroke:#000000;stroke-width:4px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         d="M 77.823529,80.705882 138.09091,80.44385 c 0,0 6.28877,-6.550802 -1.04813,-21.748663 -7.3369,-15.197861 -36.16043,-18.86631 -36.16043,-18.86631 0,0 -23.320853,-3.144385 -36.946521,13.101604 -13.625669,16.24599 -17.294118,28.561498 -17.294118,28.561498 0,0 -2.096256,25.679141 5.502674,29.871661 7.598931,4.19251 6.026738,22.01069 39.042781,23.05882 33.016044,1.04813 44.807484,-9.43316 44.807484,-9.43316 0,0 9.17113,-25.417107 9.17113,-28.29946 0,-2.882353 -5.76471,-6.28877 -5.76471,-6.28877 l -19.39037,3.144385 c 0,0 6.28877,20.438505 -12.57754,24.106955 -18.866315,3.66845 -41.663107,-8.38503 -40.614978,-17.29412 1.048128,-8.909092 3.144385,-19.652408 3.144385,-19.652408 z"
         id="path70" />
      <path
         style="fill:none;stroke:#000000;stroke-width:4px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         d="m 77.037433,64.459893 c 0.524064,-2.358289 9.433155,-12.839572 20.176471,-12.839572 10.743316,0 18.080216,12.053476 18.080216,12.053476 z"
         id="path72" />
      <path
         style="fill:none;stroke:#000000;stroke-width:4px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         d="M 47.689839,40.352941 25.15508,67.604278 c 0,0 -6.812834,23.844919 -2.096256,37.732612 4.716577,13.8877 12.839572,35.11231 26.203209,41.66311"
         id="path74" />
      <path
         style="fill:none;stroke:#000000;stroke-width:3px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         d="m 49.262033,147 27.7754,11.52941 31.443847,2.35829 28.29947,-5.24064 14.6738,-11.79145 v 0"
         id="path76" />
    </g>
        </svg>
        {% if page.root != true %}
          <span class="font">Ewen</span>
        {% endif %}
      </div>
      <h1 class="h1">
        <span lang="{{lang}}">{{ page.title }}</span>
      </h1>
      {% if page.collection == "posts" %}<time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %e, %Y" }}</time>{% endif %}
      {% if page.collection == "notes" or page.collection == "stories" %}<time datetime="{{ page.date }}">{{ page.date | date: "%Y/%m/%d %H:%M" }}</time>{% endif %}
      <div class="desc">{{ page.header_content }}</div>
    </header>
    <main>
      {% capture content_and_then_some do %}
        {% if page.type == "photos" %}
          <input type="radio" name="layout" value="y-scroll" id="y-scroll" checked>
          <label for="y-scroll">
            <svg width="15" height="15" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"><title>vertical scroll</title><path d="M55 0a5 5 0 0 1 5 5v31a5 5 0 0 1-5 5H5a5 5 0 0 1-5-5V5a5 5 0 0 1 5-5h50ZM55 47a5 5 0 0 1 5 5v8H0v-8a5 5 0 0 1 5-5h50Z" fill="#D9D9D9"/></svg>
          </label>
          <input type="radio" name="layout" value="x-scroll" id="x-scroll">
          <label for="x-scroll">
            <svg width="15" height="15" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"><title>horizontal scroll</title><path d="M0 5a5 5 0 0 1 5-5h30a5 5 0 0 1 5 5v50a5 5 0 0 1-5 5H5a5 5 0 0 1-5-5V5ZM47 5a5 5 0 0 1 5-5h8v60h-8a5 5 0 0 1-5-5V5Z" fill="#D9D9D9"/></svg>
          </label>
          <input type="radio" name="layout" value="grid2fr" id="grid2fr">
          <label for="grid2fr">
            <svg width="15" height="15" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"><title>grid 2 columns</title><path d="M0 37c0-2 2-4 4-4h19c2 0 4 2 4 4v19c0 2-2 4-4 4H4c-2 0-4-2-4-4V37zM0 4c0-2 2-4 4-4h19c2 0 4 2 4 4v19c0 2-2 4-4 4H4c-2 0-4-2-4-4V4zM33 37c0-2 2-4 4-4h19c2 0 4 2 4 4v19c0 2-2 4-4 4H37c-2 0-4-2-4-4V37zM33 4c0-2 2-4 4-4h19c2 0 4 2 4 4v19c0 2-2 4-4 4H37c-2 0-4-2-4-4V4z" fill="#D9D9D9"/></svg>
          </label>
          </label>
          <input type="radio" name="layout" value="grid3fr" id="grid3fr">
          <label for="grid3fr">
            <svg width="15" height="15" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"><title>grid 3 columns</title><path d="M22 4c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4h-8c-2 0-4-2-4-4V4zM0 26c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4H4c-2 0-4-2-4-4v-8zM22 26c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4h-8c-2 0-4-2-4-4v-8zM0 48c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4H4c-2 0-4-2-4-4v-8zM44 26c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4h-8c-2 0-4-2-4-4v-8zM22 48c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4h-8c-2 0-4-2-4-4v-8zM44 48c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4h-8c-2 0-4-2-4-4v-8zM0 4c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4H4c-2 0-4-2-4-4V4zM44 4c0-2 2-4 4-4h8c2 0 4 2 4 4v8c0 2-2 4-4 4h-8c-2 0-4-2-4-4V4z" fill="#D9D9D9"/></svg>
          </label>
        {% endif %}
        {{ content }}
      {% endcapture %}
      {% if page.collection == "posts" or page.collection == "pages" %}
        <article>
          {{ content_and_then_some }}
        </article>
      {% elsif page.collection == "notes" %}
        {{ content_and_then_some }}
      {% else %}
        {{ content_and_then_some }}
      {% endif %}
      {% if page.feature == 1 or page.open_heart %}
        <hr class="hr">
        <div class="smol">
          <div class="monospace">
            <div id="like-prompt">Like this {% if page.collection == "posts" %}post{% elsif page.collection == "notes" %}note{% else %}page{% endif %}? let me know!</div>
            &gt;<open-heart class="text-open-heart" href="https://likes.muan.dev/?id={{ page.url }}" emoji="❤️" aria-labelledby="like-prompt">
              <span class="on">Liked.<br>(Thanks!)</span><span class="off">Sure. <kbd>⏎</kbd></span>
            </open-heart>
          </div>
        </div>
      {% endif %}
    </main>

    {% if page.root %}
    <script type="module" src="/assets/site.js"></script>
    <script type="module" src="https://unpkg.com/open-stories-element@latest"></script>
    {% endif %}
    {% if page.feature == 1 or page.open_heart or page.has_open_heart %}
    <script type="module" src="https://unpkg.com/open-heart-element@latest"></script>
    <script>
      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(async (entry) => {
          await customElements.whenDefined('open-heart')
          if (entry.target instanceof OpenHeartElement && entry.isIntersecting) {
            entry.target.getCount()
            observer.unobserve(entry.target)
          }
        })
      })

      for (const oh of document.querySelectorAll('open-heart')) {
        observer.observe(oh)
      }
    </script>
    {% endif %}
    {% if page.type == "photos" %}
      <script>
        const photos = document.querySelector('#photos')
        const xScroll = document.querySelector('#x-scroll')

        // move scroll area into viewport and user focus
        document.addEventListener('change', function(event) {
          if (xScroll.checked) {
            photos.scrollIntoView()
            photos.setAttribute('tabindex', '-1')
            photos.focus()

            photos.addEventListener('blur', function() {
              photos.blur()
            }, {once: true})
          }
        })

        // return focus
        document.addEventListener('keydown', function(event) {
          if (event.key === 'Escape' && xScroll.checked && photos.contains(event.target)) {
            xScroll.focus()
            window.scrollTo(0, 0)
          }
        })
      </script>
    {% endif %}
  </body>
</html>
